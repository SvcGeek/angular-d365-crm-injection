# angular-d365-crm-injection
This GitHub-hosted project showcases how to create and develop an Angular application. It demonstrates the process of using Webpack to bundle CSS and JavaScript into a single file, allowing for the seamless loading of two web resources into Dynamics 365. The guide is free and includes steps on integrating these resources into a Dynamics 365 form


# Step 1
Run angular cli command
```
ng new your-progeject name
```
# Step 2
If app has already run ```npx i``` remove 'node_module' folder and 'package-lock.json' file
# Step 3
Install webpack, webpack-cli, style-loader and css-loader using the following command ```npm install webpack webpack-cli style-loader css-loader --save-dev```
# Step 4
Remove all default data from ```app.component.html```
# Step 5 
Create ```webpack.config.js``` file in root folder paste ths configuration, then update the entry section with the path of our dist file generated post running of ```ng build``` command

	module.exports = {
		mode: 'production',
		entry: {
			"bundle.js": [
				path.resolve(__dirname, "./dist/your-path/polyfills.js"),
				path.resolve(__dirname, "./dist/your-path/main.js"),
				path.resolve(__dirname, "./dist/your-path/styles.css"),
			],
		},
		output: {
			filename: 'bundle.js',
			path: path.resolve(__dirname, 'dist'),
		},
		module: {
			rules: [
				{
					test: /\.css$/i,
					use: ["style-loader", "css-loader"],
				},
			],
		},
	};
# Step 6
Clear your app and update ```Index.html``` deleting *base <href="/">* and add in head *<script src="https://your-project-name.crm4.dynamics.com/WebResources/bundle-logical-name" type="module"crossorigin="anonymous"></script>*
if you desire to run angular app by injection in html code, remove *<app-root></app-root>* tag, then in ```main.js``` file
			 
		 document.addEventListener('DOMContentLoaded', () => {			  
		   const appRoot = document.createElement('app-root');
		   document.body.appendChild(appRoot);
		   bootstrapApplication(AppComponent, appConfig)
			 .then(() => console.log('Angular Bootstrap succeded'))
			 .catch((err) => console.error('Angular Bootstrap error:', err));
		 });
			 
NOTE: If your selector prefix is different, make sure you adjust this; ```app-root``` is the main component app.	
# Step 7 
Set your app, dependency and styles and develop your app
# Step 8
Build app with command  ```ng build --output-hashing=none``` 
(or ng build if update angualar.json in node architect:build:configurations:production setting outputHashing to 'none' )
# Step 9
Run ```npx webpack --config webpack.config.js```
# Step 10
Check ```index.html``` in dist root and delete all scripts and styles generated by angular.
